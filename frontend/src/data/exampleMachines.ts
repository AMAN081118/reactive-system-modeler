import { StateMachine } from "../models/types";

export const exampleMachines: StateMachine[] = [
  // Example 1: Delay Component (Figure 2.3 from book)
  {
    id: "example-delay",
    name: "Delay Component",
    description:
      "Mealy machine that delays Boolean input by one cycle. From CPS Systems book Figure 2.3.",
    type: "mealy",
    states: [
      {
        id: "state-delay-0",
        name: "0",
        position: { x: 150, y: 200 },
        isInitial: true,
        isFinal: false,
      },
      {
        id: "state-delay-1",
        name: "1",
        position: { x: 400, y: 200 },
        isInitial: false,
        isFinal: false,
      },
    ],
    transitions: [
      {
        id: "trans-delay-1",
        from: "state-delay-0",
        to: "state-delay-0",
        input: "0",
        output: "0",
      },
      {
        id: "trans-delay-2",
        from: "state-delay-0",
        to: "state-delay-1",
        input: "1",
        output: "0",
      },
      {
        id: "trans-delay-3",
        from: "state-delay-1",
        to: "state-delay-0",
        input: "0",
        output: "1",
      },
      {
        id: "trans-delay-4",
        from: "state-delay-1",
        to: "state-delay-1",
        input: "1",
        output: "1",
      },
    ],
    inputVariables: [],
    outputVariables: [],
    stateVariables: [],
    createdAt: new Date(),
    updatedAt: new Date(),
  },

  // Example 2: Railroad Controller (Figure 3.8 from book)
  {
    id: "example-railroad",
    name: "Railroad Crossing Controller",
    description:
      "Safe controller for railroad crossing with two trains. From CPS Systems book Figure 3.8.",
    type: "mealy",
    states: [
      {
        id: "state-rr-away-away",
        name: "Away-Away",
        position: { x: 250, y: 100 },
        isInitial: true,
        isFinal: false,
        notes: "Both trains away from bridge",
      },
      {
        id: "state-rr-west-waiting",
        name: "West-Waiting",
        position: { x: 100, y: 250 },
        isInitial: false,
        isFinal: false,
        notes: "West train waiting, signal red",
      },
      {
        id: "state-rr-east-waiting",
        name: "East-Waiting",
        position: { x: 400, y: 250 },
        isInitial: false,
        isFinal: false,
        notes: "East train waiting, signal red",
      },
      {
        id: "state-rr-both-waiting",
        name: "Both-Waiting",
        position: { x: 250, y: 400 },
        isInitial: false,
        isFinal: false,
        notes: "Both trains waiting",
      },
      {
        id: "state-rr-west-bridge",
        name: "West-Bridge",
        position: { x: 100, y: 550 },
        isInitial: false,
        isFinal: false,
        notes: "West train on bridge",
      },
      {
        id: "state-rr-east-bridge",
        name: "East-Bridge",
        position: { x: 400, y: 550 },
        isInitial: false,
        isFinal: false,
        notes: "East train on bridge",
      },
    ],
    transitions: [
      {
        id: "trans-rr-1",
        from: "state-rr-away-away",
        to: "state-rr-away-away",
        input: "none",
        output: "green-green",
      },
      {
        id: "trans-rr-2",
        from: "state-rr-away-away",
        to: "state-rr-west-waiting",
        input: "west-arrive",
        output: "red-green",
      },
      {
        id: "trans-rr-3",
        from: "state-rr-away-away",
        to: "state-rr-east-waiting",
        input: "east-arrive",
        output: "green-red",
      },
      {
        id: "trans-rr-4",
        from: "state-rr-west-waiting",
        to: "state-rr-west-bridge",
        input: "signal-green",
        output: "green-red",
      },
      {
        id: "trans-rr-5",
        from: "state-rr-east-waiting",
        to: "state-rr-east-bridge",
        input: "signal-green",
        output: "red-green",
      },
      {
        id: "trans-rr-6",
        from: "state-rr-west-bridge",
        to: "state-rr-away-away",
        input: "west-leave",
        output: "green-green",
      },
      {
        id: "trans-rr-7",
        from: "state-rr-east-bridge",
        to: "state-rr-away-away",
        input: "east-leave",
        output: "green-green",
      },
    ],
    inputVariables: [],
    outputVariables: [],
    stateVariables: [],
    createdAt: new Date(),
    updatedAt: new Date(),
  },

  // Example 3: Light Switch (Figure 2.2 from book)
  {
    id: "example-switch",
    name: "Light Switch with Timeout",
    description:
      "Light switch that turns off after 10 rounds or manual press. From CPS Systems book Figure 2.2.",
    type: "mealy",
    states: [
      {
        id: "state-switch-off",
        name: "Off",
        position: { x: 150, y: 200 },
        isInitial: true,
        isFinal: false,
      },
      {
        id: "state-switch-on",
        name: "On",
        position: { x: 400, y: 200 },
        isInitial: false,
        isFinal: false,
      },
    ],
    transitions: [
      {
        id: "trans-switch-1",
        from: "state-switch-off",
        to: "state-switch-off",
        input: "press=0",
        output: "light=off",
      },
      {
        id: "trans-switch-2",
        from: "state-switch-off",
        to: "state-switch-on",
        input: "press=1",
        output: "light=on",
        action: "x=0",
      },
      {
        id: "trans-switch-3",
        from: "state-switch-on",
        to: "state-switch-on",
        input: "press=0 & x<10",
        output: "light=on",
        action: "x=x+1",
        guard: "x<10",
      },
      {
        id: "trans-switch-4",
        from: "state-switch-on",
        to: "state-switch-off",
        input: "press=1 | x=10",
        output: "light=off",
        action: "x=0",
      },
    ],
    inputVariables: [],
    outputVariables: [],
    stateVariables: [],
    createdAt: new Date(),
    updatedAt: new Date(),
  },

  // Example 4: Arbiter (Figure 2.7 from book)
  {
    id: "example-arbiter",
    name: "Nondeterministic Arbiter",
    description:
      "Arbiter that resolves contention between two requests. From CPS Systems book Figure 2.7.",
    type: "mealy",
    states: [
      {
        id: "state-arbiter-idle",
        name: "Idle",
        position: { x: 250, y: 200 },
        isInitial: true,
        isFinal: false,
      },
    ],
    transitions: [
      {
        id: "trans-arbiter-1",
        from: "state-arbiter-idle",
        to: "state-arbiter-idle",
        input: "req1=1 & req2=0",
        output: "grant1=1",
      },
      {
        id: "trans-arbiter-2",
        from: "state-arbiter-idle",
        to: "state-arbiter-idle",
        input: "req1=0 & req2=1",
        output: "grant2=1",
      },
      {
        id: "trans-arbiter-3",
        from: "state-arbiter-idle",
        to: "state-arbiter-idle",
        input: "req1=0 & req2=0",
        output: "none",
      },
      {
        id: "trans-arbiter-4",
        from: "state-arbiter-idle",
        to: "state-arbiter-idle",
        input: "req1=1 & req2=1",
        output: "grant1=1 (priority)",
      },
    ],
    inputVariables: [],
    outputVariables: [],
    stateVariables: [],
    createdAt: new Date(),
    updatedAt: new Date(),
  },
];
